function addScript(e,t,r){t();const s=document.createElement("script");s.setAttribute("src",e),s.addEventListener("load",()=>r()),document.head.appendChild(s)}function progressLoaded(e,t,r,s){"script"===t?addScript(e,r,s):(r(),s())}function progressLoad(s,d="script",n=()=>{},o=()=>{}){return new Promise((e,t)=>{if("ready"===sessionStorage.getItem("loaded:"+s))progressLoaded(s,d,o,e);else{const r=new XMLHttpRequest;r.addEventListener("progress",e=>n(e)),r.addEventListener("load",()=>{progressLoaded(URL.createObjectURL(new Blob([r.response])),d,o,e),sessionStorage.setItem("loaded:"+s,"ready")}),r.addEventListener("error",e=>t(e)),r.open("GET",s),r.send()}})}